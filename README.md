# GoTickitz ðŸŽ¬

<p align="center">
<svg width="121" height="32" viewBox="0 0 121 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.0471 31.0074H8.44394V7.97275H0V2.20907H22.4715V7.97275H14.0471V31.0074ZM31.1897 3.655C31.1897 4.16376 31.0918 4.63905 30.8958 5.08086C30.7131 5.5227 30.4584 5.91095 30.1318 6.24566C29.8052 6.56699 29.42 6.82805 28.976 7.02887C28.5448 7.21631 28.0812 7.31002 27.5848 7.31002C27.0886 7.31002 26.6183 7.21631 26.1743 7.02887C25.7433 6.82805 25.3645 6.56699 25.038 6.24566C24.7245 5.91095 24.4698 5.5227 24.2739 5.08086C24.091 4.63905 23.9996 4.16376 23.9996 3.655C23.9996 3.15964 24.091 2.69104 24.2739 2.24924C24.4698 1.79402 24.7245 1.40576 25.038 1.08443C25.3645 0.749727 25.7433 0.488667 26.1743 0.301229C26.6183 0.100409 27.0886 0 27.5848 0C28.0812 0 28.5448 0.100409 28.976 0.301229C29.42 0.488667 29.8052 0.749727 30.1318 1.08443C30.4584 1.40576 30.7131 1.79402 30.8958 2.24924C31.0918 2.69104 31.1897 3.15964 31.1897 3.655ZM30.269 31.0074H24.8812V9.49902H30.269V31.0074ZM52.7013 13.7766L48.7828 17.8132C48.587 17.2509 48.3192 16.7488 47.9795 16.307C47.6401 15.8518 47.2549 15.4702 46.8237 15.1623C46.4059 14.8544 45.9488 14.6201 45.4523 14.4594C44.9561 14.2987 44.4465 14.2184 43.9241 14.2184C43.1928 14.2184 42.5005 14.3724 41.8476 14.6803C41.2075 14.9882 40.6458 15.4234 40.1627 15.9857C39.6924 16.5346 39.3201 17.1906 39.0459 17.9539C38.7717 18.717 38.6345 19.5604 38.6345 20.4841C38.6345 21.2338 38.7717 21.9368 39.0459 22.593C39.3201 23.2488 39.6924 23.8246 40.1627 24.3198C40.6458 24.8153 41.2075 25.2036 41.8476 25.4846C42.5005 25.7659 43.1928 25.9063 43.9241 25.9063C44.4465 25.9063 44.9494 25.8328 45.4328 25.6856C45.9161 25.5384 46.3666 25.3308 46.7847 25.0629C47.2156 24.7819 47.5943 24.4471 47.921 24.0588C48.2604 23.6571 48.5348 23.2154 48.7438 22.7334L52.6619 26.77C52.1657 27.4931 51.5909 28.1424 50.938 28.7179C50.2979 29.2937 49.5992 29.7823 48.8417 30.184C48.0972 30.5857 47.3071 30.887 46.4712 31.0878C45.6484 31.3019 44.7994 31.4091 43.9241 31.4091C42.4484 31.4091 41.0574 31.1278 39.7513 30.5657C38.4582 29.9899 37.3219 29.2068 36.3424 28.2159C35.3757 27.2252 34.6117 26.067 34.05 24.7415C33.4885 23.4161 33.2077 21.9971 33.2077 20.4841C33.2077 18.8373 33.4885 17.2977 34.05 15.8652C34.6117 14.4326 35.3757 13.1875 36.3424 12.1298C37.3219 11.0588 38.4582 10.2153 39.7513 9.59943C41.0574 8.98356 42.4484 8.67565 43.9241 8.67565C44.7994 8.67565 45.6548 8.78944 46.4907 9.01704C47.3397 9.24465 48.143 9.57936 48.9005 10.0212C49.6711 10.4496 50.3762 10.9784 51.0163 11.6077C51.6693 12.237 52.231 12.9599 52.7013 13.7766ZM60.7142 31.0074H55.3264V0.943856H60.7142V19.9018L68.6878 9.53919H74.8398L67.8848 18.496L74.8398 31.0074H68.6878L64.4366 23.1954L60.7142 28.2562V31.0074ZM83.2641 3.655C83.2641 4.16376 83.1659 4.63905 82.9701 5.08086C82.7872 5.5227 82.5325 5.91095 82.2062 6.24566C81.8796 6.56699 81.4941 6.82805 81.0501 7.02887C80.6192 7.21631 80.1556 7.31002 79.6591 7.31002C79.163 7.31002 78.6927 7.21631 78.2487 7.02887C77.8175 6.82805 77.4387 6.56699 77.1124 6.24566C76.7989 5.91095 76.5442 5.5227 76.3482 5.08086C76.1655 4.63905 76.074 4.16376 76.074 3.655C76.074 3.15964 76.1655 2.69104 76.3482 2.24924C76.5442 1.79402 76.7989 1.40576 77.1124 1.08443C77.4387 0.749727 77.8175 0.488667 78.2487 0.301229C78.6927 0.100409 79.163 0 79.6591 0C80.1556 0 80.6192 0.100409 81.0501 0.301229C81.4941 0.488667 81.8796 0.749727 82.2062 1.08443C82.5325 1.40576 82.7872 1.79402 82.9701 2.24924C83.1659 2.69104 83.2641 3.15964 83.2641 3.655ZM82.3431 31.0074H76.9556V9.49902H82.3431V31.0074ZM96.9585 31.0074C95.6655 31.0074 94.4508 30.7598 93.3145 30.2643C92.1782 29.7557 91.1791 29.0661 90.317 28.1958C89.468 27.3121 88.7953 26.288 88.2991 25.1232C87.8157 23.9584 87.5742 22.7133 87.5742 21.3879V15.0016H84.9686V9.53919H87.5742V0.943856H92.9031V9.53919H101.014V15.0016H92.9031V21.3879C92.9031 21.9637 93.0074 22.5058 93.2166 23.0147C93.4255 23.5099 93.7128 23.945 94.0785 24.3198C94.4444 24.6949 94.8753 24.996 95.3715 25.2236C95.868 25.438 96.3968 25.5449 96.9585 25.5449H101.014V31.0074H96.9585ZM120.41 31.0074H102.914L111.75 15.0016H102.914V9.53919H120.41L111.574 25.5449H120.41V31.0074Z" fill="#1D4ED8"/>
</svg>
</p>

[![Go Version](https://img.shields.io/badge/Go-v1.21+-blue.svg)](https://golang.org/doc/devel/release.html)
[![Gin](https://img.shields.io/badge/Gin-v1.9.0+-00ADD8.svg)](https://github.com/gin-gonic/gin)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-v15+-336791.svg)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-v7.0+-DC382D.svg)](https://redis.io/)

> Modern movie ticket booking platform API built with Go and Gin - Find movies, book seats, enjoy the show!

## Tech Stack

- **Go** - Programming language
- **Gin** - Web framework
- **PostgreSQL** - Primary database (via pgx driver)
- **Redis** - Caching
- **JWT** - Authentication

## Project Structure

```
gotickitz/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ main.go         # Application entry point
â”œâ”€â”€ db/
â”‚   â””â”€â”€ migrations/     # Database migration files
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ handlers/       # HTTP request handlers
â”‚   â”œâ”€â”€ middlewares/    # Custom middlewares
â”‚   â”œâ”€â”€ models/         # Data models
â”‚   â”œâ”€â”€ repositories/   # Database interaction
â”‚   â”œâ”€â”€ routes/         # API routes
â”‚   â””â”€â”€ utils/          # Helper functions
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ hash.go         # Password hashing
â”‚   â”œâ”€â”€ jwt.go          # JWT authentication
â”‚   â”œâ”€â”€ postgre.go      # PostgreSQL connection
â”‚   â””â”€â”€ redis.go        # Redis connection
â”œâ”€â”€ public/             # Static files
â”‚   â””â”€â”€ img/            # Image storage
â””â”€â”€ .env                # Environment variables
```

## API Endpoints

### Authentication

- `POST /api/v1/users/auth` - User login
- `POST /api/v1/users/auth/new` - User registration

### User Profile

- `GET /api/v1/users/profile` - Get user profile
- `PATCH /api/v1/users/profile` - Update user profile

### Movies

- `GET /api/v1/movies` - Get movies list (with filtering options)
- `GET /api/v1/movies/:id` - Get movie details

### Showings & Seats

- `GET /api/v1/showings` - Get movie showings
- `GET /api/v1/showings/:id/seat` - Get available seats for a showing

### Transactions

- `POST /api/v1/transactions` - Create a new transaction (book tickets)
- `GET /api/v1/transactions` - Get user's transaction history

### Admin Operations

- `POST /api/v1/admin/movies` - Add new movie
- `PATCH /api/v1/admin/movies/:id` - Update movie
- `DELETE /api/v1/admin/movies` - Delete movie

## Setup

1. Clone the repository
2. Create a [`.env`](.env ) file with the following variables:
   ```
   DBUSER=your_db_user
   DBPASS=your_db_password
   DBHOST=localhost
   DBPORT=5432
   DBNAME=tickitz
   RDSHOST=localhost
   RDSPORT=6379
   JWT_SECRET=your_jwt_secret
   JWT_ISSUER=your_issuer
   ```
3. Set up the PostgreSQL database and run the migrations
4. Start the Redis server
5. Run the application:
   ```
   go run cmd/main.go
   ```

## Features

- JWT-based authentication system
- Role-based access control (user/admin)
- Image upload for user profiles
- Movie filtering by name, genre, and status (upcoming, popular)
- Seat selection with availability checking
- Transaction history
- Points system for users
- Redis caching for frequently accessed data

## Development

To run in development mode with hot reload, install [Fresh](https://github.com/gravityblast/fresh) and run:

```
fresh
```

## API Documentation

For detailed API documentation, please refer to the API documentation (not included in this repository).
